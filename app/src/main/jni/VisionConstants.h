#pragma once

/*-------------- VISION PARAMETER --------------*/

/* TARGET RECOGNITION */
#define TARGET_THRESH_LOWER_MAX 180.0
#define TARGET_THRESH_LOWER_MIN 140.0
#define TARGET_THRESH_LOWER_STEP 5.0
#define TARGET_THRESH_UPPER 255.0

#define TARGET_BLUR_SIZE 7

#define TARGET_BLUR_SIGX 2.0
#define TARGET_BLUR_SIGY 2.0

#define TARGET_CANNY_THRESH_LOWER 66.0
#define TARGET_CANNY_THRESH_UPPER 133.0
#define TARGET_CANNY_AP_SIZE 3

#define TARGET_SIDE_FILTER 65
#define TARGET_SIDE_MAX 270
#define TARGET_RECT_FUDGE_FACTOR 0.1

#define TARGET_HOUGH_RHO 1
#define TARGET_HOUGH_THRESH 50

#define TARGET_POINT_DETECTION_FUDGE_FACTOR 10

/* REFERENCE SQUARE RECOGNITION */
#define REF_SQUARE_SIZE 13.0f

#define REF_REGION_THRESH_LOWER_MIN 70.0
#define REF_REGION_THRESH_LOWER_MAX 180.0
#define REF_REGION_THRESH_LOWER_STEP 10.0
#define REF_REGION_THRESH_UPPER 220.0

#define REF_REGION_AREA_MIN 6000.0
#define REF_REGION_AREA_MAX 9700.0
#define REF_REGION_RATIO_MIN 0.2
#define REF_REGION_RATIO_MAX 0.4

#define REF_REGION_OFFSET 5.0

/* SAMPLE RECOGNITION */
#define SAMPLE_LENGTH 134.0
#define SAMPLE_ANGLE 15.5

#define SAMPLE_REGION_DIST 130
#define SAMPLE_ROI_WIDTH 80
#define SAMPLE_ROI_HEIGHT 600

#define SAMPLE_THRESH_LOWER 155.0
#define SAMPLE_THRESH_UPPER 255.0

#define SAMPLE_WIDTH_LOWER 20.0
#define SAMPLE_WIDTH_UPPER 200.0
#define SAMPLE_HEIGHT_LOWER 30.0
#define SAMPLE_HEIGHT_UPPER 400.0

#define SAMPLE_STRIP_CORRECTION_RATIO 4.88
#define SAMPLE_TEST_STRIP_CORRECTION -28.0
#define SAMPLE_TEST_STRIP_1_CORRECTION -20.0

/* SAMPLE STRIP POSITIONS */

/* 6 STRIP */
#define SAMPLE_6S_NITRATE -19.5
#define SAMPLE_6S_NITRITE -76.0
#define SAMPLE_6S_T_HARDNESS -132.0
#define SAMPLE_6S_T_CHLORINE -190.0
#define SAMPLE_6S_T_ALKALINITY -247.0
#define SAMPLE_6S_PH -305.0

/* COLOR RECOGNITION */

/* DOMINANT COLORS */
#define DOMINANT_COLOR_K 2
#define DOMINANT_COLOR_ATTEMPTS 3
#define TERM_CRITERIA_MAX_COUNT 10
#define TERM_CRITERIA_EPSILON 1.0

/* NORMALIZED REFERENCE SQUARES VALUE */
#define REF_COLOR_0 cv::Vec3d(34.9091, 0.518868, 0.831373)
#define REF_COLOR_1 cv::Vec3d(26.9565, 0.379121, 0.713725)
#define REF_COLOR_2 cv::Vec3d(20.7692, 0.337662, 0.603922)
#define REF_COLOR_3 cv::Vec3d(357.391, 0.193277, 0.466667)
#define REF_COLOR_4 cv::Vec3d(324.706, 0.165049, 0.403922)
#define REF_COLOR_5 cv::Vec3d(268.696, 0.223301, 0.403922)


//#define REF_COLOR_0 cv::Vec3d(28.0374, 0.521951, 0.803922)
//#define REF_COLOR_1 cv::Vec3d(24.3038, 0.427027, 0.72549)
//#define REF_COLOR_2 cv::Vec3d(22.2857, 0.391061, 0.701961)
//#define REF_COLOR_3 cv::Vec3d(20, 0.345455, 0.647059)
//#define REF_COLOR_4 cv::Vec3d(17.6471, 0.322785, 0.619608)
//#define REF_COLOR_5 cv::Vec3d(11.4286, 0.278146, 0.592157)

#define BGR_SCALE 255.0

/* GENERAL */
#define REFERENCE_LENGTH 160

/*------------- TEST CARD CONSTANTS -------------*/
#define NUM_ALKALINITY_REFERENCES 6
#define NUM_SAMPLES_6_STRIP 6

/* 6 Strip Nitrate Ref Colors */
#define S6_NITRATE_0_COLOR cv::Vec3d(53.3334, 0.0387931, 0.909804)
#define S6_NITRATE_20_COLOR cv::Vec3d(289.565, 0.192469, 0.835948)
#define S6_NITRATE_40_COLOR cv::Vec3d(298.983, 0.261062, 0.918301)
#define S6_NITRATE_80_COLOR cv::Vec3d(306.885, 0.508333, 0.863399)
#define S6_NITRATE_160_COLOR cv::Vec3d(314.201, 0.698347, 0.884968)
#define S6_NITRATE_200_COLOR cv::Vec3d(314.471, 0.821256, 0.818301)

#define S6_NITRATE_MAX_DISTANCE 0.9

/* 6 Strip Nitrite Ref Colors */
#define S6_NITRITE_0_COLOR cv::Vec3d(60, 0.0347826, 0.901961)
#define S6_NITRITE_05_COLOR cv::Vec3d(236.842, 0.0745098, 0.898693)
#define S6_NITRITE_10_COLOR cv::Vec3d(229.565, 0.0974576, 0.957517)
#define S6_NITRITE_30_COLOR cv::Vec3d(297.931, 0.127193, 0.81634)
#define S6_NITRITE_50_COLOR cv::Vec3d(318.462, 0.224138, 0.845752)
#define S6_NITRITE_100_COLOR cv::Vec3d(328.696, 0.312217, 0.873203)

#define S6_NITRITE_MAX_DISTANCE 0.9

/* 6 Strip Total Hardness Ref Colors */
#define S6_T_HARDNESS_0_COLOR cv::Vec3d(78.8235, 0.421488, 0.47451)
#define S6_T_HARDNESS_25_COLOR cv::Vec3d(41.25, 0.104575, 0.498693)
#define S6_T_HARDNESS_75_COLOR cv::Vec3d(10.5, 0.264901, 0.624183)
#define S6_T_HARDNESS_150_COLOR cv::Vec3d(8.68421, 0.397906, 0.671242)
#define S6_T_HARDNESS_300_COLOR cv::Vec3d(18.125, 0.426667, 0.818301)

#define S6_T_HARDNESS_MAX_DISTANCE 0.9

/* 6 Strip Total Chlorine Ref Colors */
#define S6_T_CHLORINE_0_COLOR cv::Vec3d(217.5, 0.0337553, 0.929412)
#define S6_T_CHLORINE_05_COLOR cv::Vec3d(222.353, 0.138776, 0.859477)
#define S6_T_CHLORINE_10_COLOR cv::Vec3d(246.429, 0.116667, 0.973203)
#define S6_T_CHLORINE_20_COLOR cv::Vec3d(263.077, 0.111111, 0.83987)
#define S6_T_CHLORINE_40_COLOR cv::Vec3d(301.667, 0.162162, 0.806536)
#define S6_T_CHLORINE_60_COLOR cv::Vec3d(301.2, 0.252525, 0.783007)

#define S6_T_CHLORINE_MAX_DISTANCE 0.9

/* 6 Strip Total Alkalinity Ref Colors */
#define S6_T_ALKALINITY_0_COLOR cv::Vec3d(49.5834, 0.666667, 0.847059)
#define S6_T_ALKALINITY_40_COLOR cv::Vec3d(129.231, 0.0653266, 0.679085)
#define S6_T_ALKALINITY_80_COLOR cv::Vec3d(138.462, 0.136126, 0.781046)
#define S6_T_ALKALINITY_120_COLOR cv::Vec3d(193.636, 0.237838, 0.647713)
#define S6_T_ALKALINITY_180_COLOR cv::Vec3d(194.043, 0.264045, 0.633987)
#define S6_T_ALKALINITY_300_COLOR cv::Vec3d(208.235, 0.495146, 0.410458)

#define S6_T_ALKALINITY_MAX_DISTANCE 0.9

/* 6 Strip PH Ref Colors */
#define S6_PH_62_COLOR cv::Vec3d(41.3793, 0.756522, 0.901961)
#define S6_PH_68_COLOR cv::Vec3d(26.0294, 0.609865, 0.773203)
#define S6_PH_72_COLOR cv::Vec3d(15.36, 0.536481, 0.945752)
#define S6_PH_78_COLOR cv::Vec3d(355.2, 0.446429, 0.800654)
#define S6_PH_84_COLOR cv::Vec3d(338.696, 0.627273, 0.798693)

#define S6_PH_MAX_DISTANCE 0.9

/*------------------ CHEMICAL VALUES ------------------*/
/* 6 Strip Values */

/* NITRATE VALUES */
#define S6_NITRATE_0 0
#define S6_NITRATE_1 20
#define S6_NITRATE_2 40
#define S6_NITRATE_3 80
#define S6_NITRATE_4 160
#define S6_NITRATE_5 200

/* NITRITE VALUES */
#define S6_NITRITE_0 0
#define S6_NITRITE_1 0.5
#define S6_NITRITE_2 1.0
#define S6_NITRITE_3 3.0
#define S6_NITRITE_4 5.0
#define S6_NITRITE_5 10.0

/* Total Hardness Values */
#define S6_T_HARDNESS_0 0
#define S6_T_HARDNESS_1 25
#define S6_T_HARDNESS_2 75
#define S6_T_HARDNESS_3 150
#define S6_T_HARDNESS_4 300

/* Total Chlorine Values */
#define S6_T_CHLORINE_0 0
#define S6_T_CHLORINE_1 0.5
#define S6_T_CHLORINE_2 1.0
#define S6_T_CHLORINE_3 2.0
#define S6_T_CHLORINE_4 4.0
#define S6_T_CHLORINE_5 6.0

/* Total Alkalinity Values */
#define S6_T_ALKALINITY_0 0
#define S6_T_ALKALINITY_1 40
#define S6_T_ALKALINITY_2 80
#define S6_T_ALKALINITY_3 120
#define S6_T_ALKALINITY_4 180
#define S6_T_ALKALINITY_5 300

/* PH Values */
#define S6_PH_0 6.2
#define S6_PH_1 6.8
#define S6_PH_2 7.2
#define S6_PH_3 7.8
#define S6_PH_4 8.4

/*------------- SAMPLE OP CODES -------------*/

/* 6 Strip Param OP Codes */
#define CODE_S6_NITRATE 61
#define CODE_S6_NITRITE 62
#define CODE_S6_T_HARDNESS 63
#define CODE_S6_T_CHLORINE 64
#define CODE_S6_T_ALKALINITY 65
#define CODE_S6_PH 66

/* 6 Strip Param Indexes */
#define CODE_S6_NITRATE_INDEX 0
#define CODE_S6_NITRITE_INDEX 1
#define CODE_S6_T_HARDNESS_INDEX 2
#define CODE_S6_T_CHLORINE_INDEX 3
#define CODE_S6_T_ALKALINITY_INDEX 4
#define CODE_S6_PH_INDEX 5

/* Strip OP Codes */
#define CODE_6_STRIP 201

/*----------------- HELPER VALUES ---------------*/
#define GREEN cv::Scalar(0, 255, 0)