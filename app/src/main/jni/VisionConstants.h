#pragma once

/*-------------- VISION PARAMETER --------------*/

/* TARGET RECOGNITION */
#define TARGET_THRESH_LOWER_MAX 170.0
#define TARGET_THRESH_LOWER_MIN 140.0
#define TARGET_THRESH_LOWER_STEP 5.0
#define TARGET_THRESH_UPPER 255.0

#define TARGET_BLUR_SIZE 7

#define TARGET_BLUR_SIGX 2.0
#define TARGET_BLUR_SIGY 2.0

#define TARGET_CANNY_THRESH_LOWER 66.0
#define TARGET_CANNY_THRESH_UPPER 133.0
#define TARGET_CANNY_AP_SIZE 3

#define TARGET_SIDE_FILTER 50
#define TARGET_SIDE_MAX 140
#define TARGET_RECT_FUDGE_FACTOR 0.1

#define TARGET_HOUGH_RHO 1
#define TARGET_HOUGH_THRESH 50

#define TARGET_POINT_DETECTION_FUDGE_FACTOR 10

/* REFERENCE SQUARE RECOGNITION */
#define REF_SQUARE_SIZE 12.0f

#define REF_REGION_THRESH_LOWER_MIN 70.0
#define REF_REGION_THRESH_LOWER_MAX 180.0
#define REF_REGION_THRESH_LOWER_STEP 10.0
#define REF_REGION_THRESH_UPPER 220.0

#define REF_REGION_AREA_MIN 6500.0
#define REF_REGION_AREA_MAX 9700.0
#define REF_REGION_RATIO_MIN 0.2
#define REF_REGION_RATIO_MAX 0.4

#define REF_REGION_OFFSET 6.0

/* SAMPLE RECOGNITION */
#define SAMPLE_LENGTH 134.0
#define SAMPLE_ANGLE 15.5

#define SAMPLE_REGION_DIST 130
#define SAMPLE_ROI_WIDTH 80
#define SAMPLE_ROI_HEIGHT 600

#define SAMPLE_THRESH_LOWER 155.0
#define SAMPLE_THRESH_UPPER 255.0

#define SAMPLE_WIDTH_LOWER 20.0
#define SAMPLE_WIDTH_UPPER 200.0
#define SAMPLE_HEIGHT_LOWER 30.0
#define SAMPLE_HEIGHT_UPPER 400.0

#define SAMPLE_STRIP_CORRECTION_RATIO 4.88
#define SAMPLE_TEST_STRIP_CORRECTION -28.0
#define SAMPLE_TEST_STRIP_1_CORRECTION -20.0

/* SAMPLE STRIP POSITIONS */

/* CARD 1 */
#define SAMPLE_DIST_NITRATE 13.0
#define SAMPLE_DIST_NITRITE -53.0

/* CARD 2 */
#define SAMPLE_DIST_COPPER 13.0

/* CARD 3 */
#define SAMPLE_DIST_TOTAL_CHLORINE 12
#define SAMPLE_DIST_FREE_CHLORINE -53
#define SAMPLE_DIST_TOTAL_HARDNESS -120
#define SAMPLE_DIST_ALKALINITY -180
#define SAMPLE_DIST_PH -240

/* COLOR RECOGNITION */

/* DOMINANT COLORS */
#define DOMINANT_COLOR_K 2
#define DOMINANT_COLOR_ATTEMPTS 3
#define TERM_CRITERIA_MAX_COUNT 10
#define TERM_CRITERIA_EPSILON 1.0

/* NORMALIZED REFERENCE SQUARES VALUE */
#define REF_COLOR_0 cv::Vec3d(36, 0.668449, 0.733333)
#define REF_COLOR_1 cv::Vec3d(34.5882, 0.548387, 0.607843)
#define REF_COLOR_2 cv::Vec3d(35.5932, 0.468254, 0.494118)
#define REF_COLOR_3 cv::Vec3d(36.4286, 0.307692, 0.356863)
#define REF_COLOR_4 cv::Vec3d(31.4286, 0.253012, 0.32549)
#define REF_COLOR_5 cv::Vec3d(23.0769, 0.175676, 0.290196)

#define BGR_SCALE 255.0

/* GENERAL */
#define REFERENCE_LENGTH 75

/*------------- TEST CARD CONSTANTS -------------*/
#define NUM_ALKALINITY_REFERENCES 6

/* PPM NORMALIZED COLORS */
#define ALKALINITY_0_COLOR cv::Vec3d(48.9638, 0.678046, 0.794535)
#define ALKALINITY_1_COLOR cv::Vec3d(63.1896, 0.358716, 0.607069)
#define ALKALINITY_2_COLOR cv::Vec3d(88.0652, 0.171686, 0.486555)
#define ALKALINITY_3_COLOR cv::Vec3d(168.906, 0.241388, 0.458003)
#define ALKALINITY_4_COLOR cv::Vec3d(189.37, 0.20602, 0.477649)
#define ALKALINITY_5_COLOR cv::Vec3d(200.559, 0.208543, 0.395491)

#define ALKALINITY_MAX_DISTANCE 10.0

/* NITRITE NORMALIZED COLORS */
#define NITRITE_0_COLOR cv::Vec3d(37.5, 0.194332, 0.968627)
#define NITRITE_015_COLOR cv::Vec3d(24.5405, 0.0869074, 0.944444)
#define NITRITE_03_COLOR cv::Vec3d(23.5101, 0.126749, 0.947712)
#define NITRITE_1_COLOR cv::Vec3d(18.2378, 0.190262, 0.966667)
#define NITRITE_15_COLOR cv::Vec3d(15.756, 0.255921, 0.94183)
#define NITRITE_3_COLOR cv::Vec3d(11.0012, 0.374274, 0.975817)

#define NITRITE_MAX_DISTANCE 10.0

/* NITRATE NORMALIZED COLORS */
#define NITRATE_0_COLOR cv::Vec3d(32.3377, 0.312738, 0.894118)
#define NITRATE_1_COLOR cv::Vec3d(31.8358, 0.256933, 0.90719)
#define NITRATE_2_COLOR cv::Vec3d(28.1411, 0.261956, 0.94902)
#define NITRATE_5_COLOR cv::Vec3d(25.4762, 0.226955, 0.94183)
#define NITRATE_10_COLOR cv::Vec3d(16.2693, 0.346828, 0.956863)
#define NITRATE_20_COLOR cv::Vec3d(9.11109, 0.442254, 0.956209)
#define NITRATE_50_COLOR cv::Vec3d(0.590188, 0.731988, 0.838562)

#define NITRATE_MAX_DISTANCE 10.0

/* COPPER NORMALIZED COLORS */
#define COPPER_0_COLOR cv::Vec3d(24.007675, 0.21236925, 0.91683)
#define COPPER_02_COLOR cv::Vec3d(28.5975, 0.150113, 0.8683005)
#define COPPER_05_COLOR cv::Vec3d(26.87365, 0.1412175, 0.832026)
#define COPPER_1_COLOR cv::Vec3d(32.6462, 0.1874845, 0.8062095)

#define COPPER_MAX_DISTANCE 5.0

/* TOTAL CHLORINE NORMALIZED COLORS */
#define TOTAL_CHLORINE_0_COLOR cv::Vec3d(34.1716, 0.1449425, 0.919935)
#define TOTAL_CHLORINE_05_COLOR cv::Vec3d(11.93791, 0.148613, 0.851961)
#define TOTAL_CHLORINE_1_COLOR cv::Vec3d(5.0456, 0.215651, 0.8506535)
#define TOTAL_CHLORINE_2_COLOR cv::Vec3d(1.0747485,0.269033, 0.788889)
#define TOTAL_CHLORINE_4_COLOR cv::Vec3d(351.5925, 0.329831, 0.7477125)
#define TOTAL_CHLORINE_10_COLOR cv::Vec3d(352.161, 0.369293, 0.6421565)

#define TOTAL_CHLORINE_MAX_DISTANCE 10.0

/* FREE CHLORINE NORMALIZED COLORS */
#define FREE_CHLORINE_0_COLOR cv::Vec3d(38.3798, 0.1990625, 0.9140485)
#define FREE_CHLORINE_05_COLOR cv::Vec3d(26.6267, 0.131704, 0.8715685)
#define FREE_CHLORINE_1_COLOR cv::Vec3d(14.76255, 0.10033445, 0.911438)
#define FREE_CHLORINE_2_COLOR cv::Vec3d(356.0285, 0.170958, 0.761438)
#define FREE_CHLORINE_4_COLOR cv::Vec3d(353.5645, 0.209755, 0.7065355)
#define FREE_CHLORINE_10_COLOR cv::Vec3d(350.2145, 0.2828765, 0.6539215)

#define FREE_CHLORINE_MAX_DISTANCE 10.0

/* TOTAL HARDNESS NORMALIZED COLORS */
#define TOTAL_HARDNESS_0_COLOR cv::Vec3d(47.79485, 0.1733755, 0.45719)
#define TOTAL_HARDNESS_25_COLOR cv::Vec3d(52.48605, 0.2789955, 0.459804)
#define TOTAL_HARDNESS_50_COLOR cv::Vec3d(34.49, 0.519417, 0.466667)
#define TOTAL_HARDNESS_120_COLOR cv::Vec3d(21.59455, 0.787471, 0.514379)
#define TOTAL_HARDNESS_250_COLOR cv::Vec3d(17.2931, 0.79564, 0.666013)
#define TOTAL_HARDNESS_425_COLOR cv::Vec3d(20.90655, 0.8650365, 0.761765)

#define TOTAL_HARDNESS_MAX_DISTANCE 10.0

/* PH NORMALIZED COLORS */
#define PH_62_COLOR cv::Vec3d(30.65695, 0.8234285, 0.7735295)
#define PH_68_COLOR cv::Vec3d(27.1392, 0.928982, 0.8)
#define PH_72_COLOR cv::Vec3d(17.60625, 0.937041, 0.7555555)
#define PH_78_COLOR cv::Vec3d(14.892, 0.861136, 0.775817)
#define PH_84_COLOR cv::Vec3d(9.168235, 0.888807, 0.769608)

#define PH_MAX_DISTANCE 10.0

/*------------------ CHEMICAL VALUES ------------------*/

/* ALKALINITY VALUES */
#define ALKALINITY_0 0
#define ALKALINITY_1 40
#define ALKALINITY_2 80
#define ALKALINITY_3 120
#define ALKALINITY_4 180
#define ALKALINITY_5 240

/* NITRITE VALUES */
#define NITRITE_0 0
#define NITRITE_1 0.15
#define NITRITE_2 0.3
#define NITRITE_3 1
#define NITRITE_4 1.5
#define NITRITE_5 3

/* NITRATE VALUES */
#define NITRATE_0 0
#define NITRATE_1 1
#define NITRATE_2 2
#define NITRATE_3 5
#define NITRATE_3 5
#define NITRATE_4 10
#define NITRATE_5 20
#define NITRATE_6 50

/* Copper Values */
#define COPPER_0 0
#define COPPER_1 0.2
#define COPPER_2 0.5
#define COPPER_3 1

/* Total Chlorine Values */
#define TOTAL_CHLORINE_0 0
#define TOTAL_CHLORINE_1 0.5
#define TOTAL_CHLORINE_2 1
#define TOTAL_CHLORINE_3 2
#define TOTAL_CHLORINE_4 4
#define TOTAL_CHLORINE_5 10

/* Free Chlorine Values */
#define FREE_CHLORINE_0 0
#define FREE_CHLORINE_1 0.5
#define FREE_CHLORINE_2 1
#define FREE_CHLORINE_3 2
#define FREE_CHLORINE_4 4
#define FREE_CHLORINE_5 10

/* Total Hardness Values */
#define TOTAL_HARDNESS_0 0
#define TOTAL_HARDNESS_1 25
#define TOTAL_HARDNESS_2 50
#define TOTAL_HARDNESS_3 120
#define TOTAL_HARDNESS_4 250
#define TOTAL_HARDNESS_5 425

/* PH Values */
#define PH_0 6.2
#define PH_1 6.8
#define PH_2 7.2
#define PH_3 7.8
#define PH_4 8.4

/*------------- SAMPLE OP CODES -------------*/
#define CODE_ALKALINITY 101
#define CODE_NITRITE 102
#define CODE_NITRATE 103
#define CODE_COPPER 104
#define CODE_TOTAL_CHLORINE 105
#define CODE_FREE_CHLORINE 106
#define CODE_TOTAL_HARDNESS 107
#define CODE_PH 108

#define CODE_STRIP_1 201       /* 5 in 1 strip part 1 */
#define CODE_STRIP_2 202       /* 5 in 1 strip part 2 */
#define CODE_STRIP_3 203       /* Nitrite strip */
#define CODE_STRIP_4 204	   /* Nitrate strip */
#define CODE_STRIP_5 205       /* Copper strip */

/*----------------- HELPER VALUES ---------------*/
#define GREEN cv::Scalar(0, 255, 0)